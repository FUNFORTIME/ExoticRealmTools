# 建筑放置与管理技能模板

> 一个功能完备的《原神》千星奇域建筑放置系统，提供建筑位置预览、升级降级、权限控制、远程移除等全套解决方案。

## ✨ 系统特性

### 🏗️ 核心功能

- **建筑位置预览**：在放置前预览建筑位置（非建筑模型本身）
- **灵活建筑管理**：通过建筑管理器统一管理所有建筑实体
- **完整生命周期**：支持建筑的建造、升级、降级、移除全流程
- **权限控制系统**：仅建造者可对建筑进行降级和移除操作
- **远程移除技能**：新增技能远程移除功能，支持类植物大战僵尸游戏玩法

### ⚙️ 默认配置

- **建筑数量限制**：3个（可调整）
- **建筑等级上限**：5级（可调整）
- **权限验证**：仅建造者可操作自有建筑

## 🚀 快速开始

### 第一步：导入项目

在**千星沙箱**中直接导入**文件夹中所有资产**，对应节点图将自动导入。

### 第二步：配置管理器

1. 将**管理器元件**的数据表完整复制到**关卡元件**中
2. 确保所有字段和数值正确转移，**尤其是移除器元件和目标元件的ID**
3. 验证数据引用关系完整

### 第三步：设置技能

1. 在角色技能栏位中设定建筑放置技能和建筑移除技能
2. 确认技能引用关系正确

### 第四步：测试运行

1. 进入测试模式，使用技能放置建筑
2. 验证以下功能：
   - 建筑位置预览显示
   - 建造数量限制（默认3个）
   - 升级功能（最高5级）
   - 降级和移除权限控制
   - 远程移除技能功能

## 📖 详细使用指南

### 建筑管理机制

- **管理器元件**作为资源文件，将关卡实体作为Manager
- 可初始化建筑数目，不初始化则无数量限制
- 通过修改元件ID参数即可放置不同的建筑对象

### 🎯 新增功能：远程移除系统

- **技能远程移除**：无需靠近建筑，通过技能即可远程移除指定位置建筑
- **网格修正**：配合网格系统实现精确的位置定位
- **类植物大战僵尸玩法**：通过网格布局和远程管理，实现塔防类游戏体验

### ⚠️ 重要注意事项

- **移除范围判定**：移除技能会移除距离过近的元件，请确保建筑布局合理
- **多元件防护**：避免多个元件放置在相同或过近位置，防止误移除
- **自定义判定**：如需精确控制，可修改碰撞触发器判定参数

### 建筑实体逻辑

在每个建筑Prefab中，你可以：

- 基于模板加入自定义逻辑
- 实现升级、降级、移除控制
- 设置权限验证规则（通过客户端节点图设置）

### 自定义配置

**修改管理器：**

1. 找到 **等级属性获取** 复合节点
2. 将其内部的 **关卡实体** 替换为你自定义的Manager实体

**修改为召唤原魔：**

1. 找到 **建筑放置响应** 节点图
2. 将创建元件节点后面的内容删除后，自行配置
3. 若要控制原魔数量，需要在 **关卡实体** 发送对应信号（**实体销毁时**这一节点只能在关卡实体生效）

## 🔧 技术说明

### 约束检验型数据

本系统使用了约束检验型数据来进行数据上限约束。如需深入了解该技术细节，请访问：
[📚 约束检验型数据详细说明](./%E7%BA%A6%E6%9D%9F%E6%A3%80%E9%AA%8C%E5%9E%8B%E6%95%B0%E6%8D%AE%E8%AF%A6%E7%BB%86%E8%AF%B4%E6%98%8E.md)

## 💡 应用场景

- **塔防游戏**：防御塔建造与升级系统（类植物大战僵尸）
- **基地建设**：资源建筑管理与发展
- **召唤系统**：召唤物数量控制
- **权限演示**：玩家专属建筑保护
- **网格策略游戏**：基于网格的建造和移除系统

## 🛠️ 扩展开发

基于此模板，你可以专注于实现：

1. 不同建筑类型的多样化系统
2. 复杂的经济和资源消耗机制
3. 多人协作的建筑管理系统
4. 网格化的战略布局游戏
5. 精确的距离判定和碰撞检测

---

**🌟 提示**：建议先在默认配置下测试系统运行情况，确认功能正常后再进行自定义扩展。所有核心逻辑均已封装完善，只需关注业务规则即可快速上手。

**⚠️ 导入注意**：请确保导入时所有资产完整，特别是移除器元件和目标元件的ID配置正确，以避免功能异常。

---

*该模板由维护文档者制作，相关问题请提出issue即可。*
