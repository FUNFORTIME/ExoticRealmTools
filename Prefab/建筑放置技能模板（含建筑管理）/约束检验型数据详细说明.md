# 约束检验型数据详细说明

## 🧩 数据类型说明：约束检验型数据（17位整型）

### 📌 结构定义

该数据类型使用 **17位无符号整数** 表示，结构如下：

| 位域范围 | 含义  | 说明              |
| ---- | --- | --------------- |
| 0-7  | 当前值 | 数据当前的实际取值       |
| 8-15 | 最大值 | 允许的最大值，不能超过 63  |
| 16   | 标志位 | 固定为 1，确保总位数为 17 |

---

## 🔧 初始化节点：约束检验型数据初始化

### 输入参数：

- **目标实体**：数据所属的实体对象

- **变量名**：数据的变量名称

- **初始值**：`[0, 63]`，设定数据的初始当前值

- **最大值**：`[1, 63]`，设定数据的最大值；若留空，则使用外部值

### 初始化方式：

- 若使用外部值，则：
  
  ```Plain
  65536 + 256 * MAXvalue
  ```

  其中 `MAXvalue` 为最大值，用于初始化最大值部分，当前值默认为0。

---

## ✏️ 修改节点：约束检验型数据值修改

### 输入参数：

- **目标实体**：数据所属的实体对象

- **变量名**：数据的变量名

- **修改值**：`[0, 63]`，设定新的当前值

- **修改最大值**：`[1, 63]`，设定新的最大值；若留空，则不修改最大值

### 修改逻辑：

- 若提供“修改值”，则更新当前值（0-7位）

- 若提供“修改最大值”，则更新最大值（8-15位）

- 标志位（第16位）始终保持为 1

---

## 🧠 示例

### 初始化示例：

- 初始值 = 10，最大值 = 50
  构造结果为：
  `1（第16位）| 50（8-15位）| 10（0-7位）`
  即：`1 << 16 | 50 << 8 | 10 = 82706`

### 修改示例：

- 原数据：`82706`（即值=10，最大值=50）

- 修改值 = 20，修改最大值 = 60
  新数据为：
  `1 << 16 | 60 << 8 | 20 = 98836`

---

## ✅ 使用注意事项

- 当前值和最大值均不能超过 63

- 最大值至少为 1

- 标志位必须为 1，确保数据为 17 位格式

- 初始化时若留空“最大值”，则依赖外部传入值

- 修改时若留空“修改最大值”，则最大值保持不变

---
